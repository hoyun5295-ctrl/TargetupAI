# ì‘ì—… ëª…ì„¸ì„œ: ì—…ë¡œë“œ ì•ˆì •í™” + DB êµ¬ì¡° ë³€ê²½

> **ì‘ì„±ì¼**: 2026-02-19
> **ì‘ì„± ê·¼ê±°**: Haroldë‹˜ê³¼ ìƒì„¸ ë…¼ì˜ ì™„ë£Œ, ë°©í–¥ í™•ì •
> **ì‘ì—… ë²”ìœ„**: ì—…ë¡œë“œ ì•ˆì •í™” + customers UNIQUE í‚¤ ë³€ê²½ + ìˆ˜ì‹ ê±°ë¶€ user_id ê¸°ì¤€ ì „í™˜
> **ë°˜ë“œì‹œ ì´ ë¬¸ì„œë¥¼ ë¨¼ì € ì½ê³  ì‘ì—…í•  ê²ƒ**

---

## 1. ë°°ê²½ ë° ë¬¸ì œ ì •ì˜

### 1-1. ì—…ë¡œë“œ 3,177ê±´ ëŠê¹€ ë¬¸ì œ (í¬ë¦¬í‹°ì»¬)
- **ì¦ìƒ**: 11,228ê±´ ì—‘ì…€ ì—…ë¡œë“œ ì‹œ 3,177ê±´ë§Œ INSERT, ë‚˜ë¨¸ì§€ ë¬´ì‹œë¨
- **ì›ì¸**: upload.ts BATCH_SIZE=4000, ë ˆì½”ë“œë‹¹ 18ê°œ íŒŒë¼ë¯¸í„° â†’ 4000Ã—18=72,000 > PostgreSQL í•œê³„ 65,535
- **ì—ëŸ¬ ë¡œê·¸**: `Batch insert error: bind message has 6464 parameter formats but 0 parameters` (upload.ts:379)
- **ì˜í–¥**: ëª¨ë“  ê³ ê°ì‚¬ì—ì„œ ë™ì¼ í˜„ìƒ ë°œìƒ ì¤‘

### 1-2. ëŒ€ìš©ëŸ‰ ì—…ë¡œë“œ ë¶ˆê°€ (êµ¬ì¡°ì )
- ê³ ê°ì‚¬ ë°ì´í„° ê·œëª¨: 30ë§Œ~80ë§Œê±´ (ìµœëŒ€ 100ë§Œê±´ ì´ìƒ ê°€ëŠ¥)
- í˜„ì¬ `/parse`ì—ì„œ allData(ì „ì²´ ë°ì´í„°)ë¥¼ JSONìœ¼ë¡œ ë¸Œë¼ìš°ì €ì— ì „ì†¡ â†’ ë©”ëª¨ë¦¬ í­ë°œ
- `/save`ê°€ ë™ê¸° ì²˜ë¦¬ â†’ HTTP íƒ€ì„ì•„ì›ƒ, ë¸Œë¼ìš°ì € ë‹«ìœ¼ë©´ ì¤‘ë‹¨
- ì§„í–‰ë¥  Redis ì½”ë“œ ìˆìœ¼ë‚˜ ì‹¤ì§ˆì  ë¯¸í™œìš©

### 1-3. customers UNIQUE í‚¤ ë¬¸ì œ
- í˜„ì¬: `company_id + phone` â†’ ê°™ì€ íšŒì‚¬ ë‚´ ë¸Œëœë“œë³„ ê³ ê° êµ¬ë¶„ ë¶ˆê°€
- í™”ì¥í’ˆ ë³¸ì‚¬(ì‹œì„¸ì´ë„, ì—˜ì˜¤ì¼€ì´ ë“±) â†’ ë¸Œëœë“œ 10ê°œ, ê³ ê° ì¤‘ë³µ ê°€ì…
- NARS 3ë§Œ + CPB 2ë§Œ + SH 1.5ë§Œ ì—…ë¡œë“œ â†’ ì¤‘ë³µ ì œê±°ë˜ì–´ 4ë§Œê±´ë§Œ ì €ì¥ (ì˜ëª»ëœ ë™ì‘)
- ê° ë¸Œëœë“œë³„ ë…ë¦½ ë§ˆì¼€íŒ…ì´ ì •ìƒ â†’ ë³„ë„ rowë¡œ ì €ì¥ë˜ì–´ì•¼ í•¨

### 1-4. ìˆ˜ì‹ ê±°ë¶€ êµ¬ì¡° ë¬¸ì œ
- í˜„ì¬: company_id ê¸°ì¤€ â†’ ë¸Œëœë“œë³„ ìˆ˜ì‹ ê±°ë¶€ êµ¬ë¶„ ë¶ˆê°€
- ë³€ê²½: user_id ê¸°ì¤€ â†’ ê° ì‚¬ìš©ìê°€ ìê¸° ìˆ˜ì‹ ê±°ë¶€ ëª©ë¡ ê´€ë¦¬
- 080 API ì½œë°±: í•´ë‹¹ 080ë²ˆí˜¸ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  userì—ê²Œ broadcast INSERT

---

## 2. í™•ì •ëœ ì„¤ê³„

### 2-1. ì—…ë¡œë“œ ì•ˆì •í™”

#### /parse ë³€ê²½
- **allData ì™„ì „ ì œê±°** â€” ì–´ì°¨í”¼ /saveì—ì„œ íŒŒì¼ì„ ë‹¤ì‹œ ì½ìœ¼ë¯€ë¡œ ë¶ˆí•„ìš”
- ì‘ë‹µ: `{ headers, preview(5í–‰), totalRows, fileId }` ë§Œ ë°˜í™˜
- 100ë§Œê±´ì´ì–´ë„ ì‘ë‹µì€ ìˆ˜ KB

#### /save ë³€ê²½ â€” ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬
```
[í˜„ì¬] /save í˜¸ì¶œ â†’ ì „ì²´ ì²˜ë¦¬ ì™„ë£Œê¹Œì§€ HTTP ì‘ë‹µ ëŒ€ê¸° (ìˆ˜ ë¶„) â†’ ê²°ê³¼ ë°˜í™˜
[ë³€ê²½] /save í˜¸ì¶œ â†’ jobId ì¦‰ì‹œ ë°˜í™˜ (1ì´ˆ) â†’ ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬ â†’ í”„ë¡ íŠ¸ í´ë§
```

- /saveëŠ” jobIdë¥¼ ì¦‰ì‹œ ë°˜í™˜í•˜ê³ , ì²˜ë¦¬ëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì§„í–‰
- ë¸Œë¼ìš°ì € ë‹«ì•„ë„ ì„œë²„ì—ì„œ ê³„ì† ì²˜ë¦¬ë¨
- BATCH_SIZE: 4000 â†’ **500** (500Ã—18=9,000, ì•ˆì „)

#### Redis ì§„í–‰ë¥  êµ¬ì¡° (ê°•í™”)
```json
ì²˜ë¦¬ì¤‘:
{
  "status": "processing",
  "total": 1000000,
  "processed": 340000,
  "percent": 34,
  "insertCount": 280000,
  "duplicateCount": 58000,
  "errorCount": 2000,
  "startedAt": "2026-02-19T15:30:00",
  "message": "ì²˜ë¦¬ ì¤‘..."
}

ì™„ë£Œ:
{
  "status": "completed",
  "total": 1000000,
  "processed": 1000000,
  "percent": 100,
  "insertCount": 850000,
  "duplicateCount": 148500,
  "errorCount": 1500,
  "startedAt": "2026-02-19T15:30:00",
  "completedAt": "2026-02-19T15:34:22",
  "message": "ì´ 1,000,000ê±´ ì¤‘ ì‹ ê·œ 850,000ê±´, ì—…ë°ì´íŠ¸ 148,500ê±´"
}

ì‹¤íŒ¨:
{
  "status": "failed",
  "percent": 67,
  "processed": 670000,
  "error": "DB ì—°ê²° ì˜¤ë¥˜",
  "insertCount": 560000,
  "message": "ì˜¤ë¥˜ ë°œìƒ. 670,000ê±´ê¹Œì§€ ì²˜ë¦¬ ì™„ë£Œ. ì¬ì—…ë¡œë“œ ì‹œ ì¤‘ë³µ ê±´ì€ ìë™ ìŠ¤í‚µë©ë‹ˆë‹¤."
}
```

#### /progress/:fileId (ê¸°ì¡´ API ê°•í™”)
- í˜„ì¬ë„ ì¡´ì¬ (upload.ts 467~479)
- Redis êµ¬ì¡° í™•ì¥ì— ë§ì¶° ì‘ë‹µ ê°•í™”

#### í”„ë¡ íŠ¸ì—”ë“œ â€” í”„ë¡œê·¸ë ˆìŠ¤ë°” ëª¨ë‹¬
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ“¤ ê³ ê° ë°ì´í„° ì—…ë¡œë“œ ì¤‘          â”‚
â”‚                                         â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  67%         â”‚
â”‚                                         â”‚
â”‚  ì²˜ë¦¬: 670,000 / 1,000,000ê±´            â”‚
â”‚  ì‹ ê·œ: 560,000ê±´ | ì—…ë°ì´íŠ¸: 108,000ê±´    â”‚
â”‚                                         â”‚
â”‚  â± ê²½ê³¼: 2ë¶„ 14ì´ˆ                       â”‚
â”‚  ğŸ’¡ ë¸Œë¼ìš°ì €ë¥¼ ë‹«ì•„ë„ ì²˜ë¦¬ëŠ” ê³„ì†ë©ë‹ˆë‹¤     â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ì™„ë£Œ ì‹œ:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         âœ… ì—…ë¡œë“œ ì™„ë£Œ                    â”‚
â”‚                                         â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  100%        â”‚
â”‚                                         â”‚
â”‚  ì „ì²´: 1,000,000ê±´                       â”‚
â”‚  âœ… ì‹ ê·œ: 850,000ê±´                      â”‚
â”‚  ğŸ”„ ì—…ë°ì´íŠ¸: 148,500ê±´                  â”‚
â”‚  âš ï¸ ì˜¤ë¥˜: 1,500ê±´ (ì „í™”ë²ˆí˜¸ í˜•ì‹ ì˜¤ë¥˜)    â”‚
â”‚                                         â”‚
â”‚  ì†Œìš”ì‹œê°„: 4ë¶„ 22ì´ˆ                       â”‚
â”‚                                         â”‚
â”‚              [ í™•ì¸ ]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ëª¨ë‹¬: ì˜ˆìœ ë²„ì „ (animate-in, fade-in, ì•„ì´ì½˜+ì œëª©+ì„¤ëª…+ë²„íŠ¼)
- 2ì´ˆë§ˆë‹¤ /progress í´ë§
- "ë¸Œë¼ìš°ì €ë¥¼ ë‹«ì•„ë„ ì²˜ë¦¬ëŠ” ê³„ì†ë©ë‹ˆë‹¤" ì•ˆë‚´ í‘œì‹œ
- ì™„ë£Œ/ì‹¤íŒ¨ ì‹œ ê²°ê³¼ ë¦¬í¬íŠ¸ í‘œì‹œ

### 2-2. customers UNIQUE í‚¤ ë³€ê²½

#### ë³€ê²½ ë‚´ìš©
```
í˜„ì¬: UNIQUE (company_id, phone)  â€” idx_customers_company_phone
ë³€ê²½: UNIQUE (company_id, COALESCE(store_code, '__NONE__'), phone)
```

- store_code ìˆëŠ” ê³ ê°ì‚¬ (ì‹œì„¸ì´ë„ ë“±): company_id + NARS + 01012345678 / company_id + CPB + 01012345678 â†’ ë³„ë„ row
- store_code ì—†ëŠ” ê³ ê°ì‚¬ (ì•„ì´ì†Œì´ ë“±): company_id + __NONE__ + 01012345678 â†’ ê¸°ì¡´ê³¼ ë™ì¼ 1ê±´
- PostgreSQL UNIQUEì—ì„œ NULLì€ ì„œë¡œ ë‹¤ë¥¸ ê°’ ì·¨ê¸‰ â†’ COALESCE í•„ìˆ˜ (ì•ˆ í•˜ë©´ ê°™ì€ ë²ˆí˜¸ ë¬´í•œ INSERT)

#### DDL
```sql
-- ê¸°ì¡´ ì¸ë±ìŠ¤ ì‚­ì œ
DROP INDEX IF EXISTS idx_customers_company_phone;

-- ìƒˆ UNIQUE ì¸ë±ìŠ¤ ìƒì„±
CREATE UNIQUE INDEX idx_customers_company_store_phone 
ON customers (company_id, COALESCE(store_code, '__NONE__'), phone);
```

#### ì˜í–¥ë°›ëŠ” ëª¨ë“  ON CONFLICT êµ¬ë¬¸ ìˆ˜ì •
- upload.ts: `ON CONFLICT (company_id, phone)` â†’ `ON CONFLICT (company_id, COALESCE(store_code, '__NONE__'), phone)`
- sync.ts: ë™ì¼ ë³€ê²½
- customers.ts: ì¤‘ë³µ ì²´í¬ ë¡œì§ ë³€ê²½
- campaigns.ts: íƒ€ê²Ÿ ì¶”ì¶œ ì‹œ store_code ê³ ë ¤

### 2-3. ìˆ˜ì‹ ê±°ë¶€ user_id ê¸°ì¤€ ì „í™˜

#### í˜„ì¬ êµ¬ì¡°
```
unsubscribes: company_id + phone â†’ íšŒì‚¬ ì „ì²´ ìˆ˜ì‹ ê±°ë¶€
opt_outs: company_id + phone â†’ íšŒì‚¬ ì „ì²´ ìˆ˜ì‹ ê±°ë¶€
```

#### ë³€ê²½ êµ¬ì¡°
```
unsubscribes: user_id + phone â†’ ì‚¬ìš©ìë³„ ìˆ˜ì‹ ê±°ë¶€
opt_outs: user_id + phone â†’ ì‚¬ìš©ìë³„ ìˆ˜ì‹ ê±°ë¶€
```

#### DDL
```sql
-- unsubscribesì— user_id ì¶”ê°€
ALTER TABLE unsubscribes ADD COLUMN user_id uuid REFERENCES users(id);

-- opt_outsì— user_id ì¶”ê°€
ALTER TABLE opt_outs ADD COLUMN user_id uuid REFERENCES users(id);

-- ì¸ë±ìŠ¤ ë³€ê²½ (ê¸°ì¡´ company_id ê¸°ë°˜ â†’ user_id ê¸°ë°˜)
-- ê¸°ì¡´ ì¸ë±ìŠ¤ í™•ì¸ í›„ êµì²´ í•„ìš”
```

#### ë°œì†¡ ì‹œ ìˆ˜ì‹ ê±°ë¶€ ì²´í¬ ë¡œì§ ë³€ê²½
- í˜„ì¬: íšŒì‚¬(company_id) ìˆ˜ì‹ ê±°ë¶€ ëª©ë¡ì—ì„œ ì œì™¸
- ë³€ê²½: ìº í˜ì¸ ìƒì„± ì‚¬ìš©ì(user_id)ì˜ ìˆ˜ì‹ ê±°ë¶€ ëª©ë¡ì—ì„œ ì œì™¸

#### 080 API ì½œë°± ë³€ê²½
- 080 ìˆ˜ì‹ ê±°ë¶€ ì ‘ìˆ˜ ì‹œ: í•´ë‹¹ 080ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³ ê°ì‚¬ì˜ **ëª¨ë“  user**ì—ê²Œ INSERT
- ì¡°íšŒ: callback_numbers í…Œì´ë¸”ì—ì„œ í•´ë‹¹ 080ë²ˆí˜¸ â†’ company_id â†’ users â†’ ì „ì›ì—ê²Œ insert

### 2-4. ìš”ê¸ˆì œ ê¸°ì¤€
- max_customers = ê´€ë¦¬ ì¤‘ì¸ DB ê±´ìˆ˜ ê¸°ì¤€ (ë¸Œëœë“œë³„ ì¤‘ë³µ í¬í•¨)
- NARS 3ë§Œ + CPB 2ë§Œ + SH 1.5ë§Œ = 6.5ë§Œê±´ì´ ê¸°ì¤€
- í”Œëœ ì´ˆê³¼ ì²´í¬ ë¡œì§ ë³€ê²½ ì—†ìŒ (customers í…Œì´ë¸” COUNT ê·¸ëŒ€ë¡œ)

---

## 3. ê¸°íƒ€ ì—ëŸ¬ ìˆ˜ì • (ì—ëŸ¬ ë¡œê·¸ì—ì„œ ë°œê²¬)

### 3-1. ìŠ¤íŒ¸í•„í„° spam_check_number NOT NULL ì—ëŸ¬
- **íŒŒì¼**: spam-filter.ts:75
- **ì—ëŸ¬**: `null value in column "spam_check_number" violates not-null constraint`
- **ì›ì¸**: 080 ì¹˜í™˜ ë¡œì§ ì œê±° í›„ spam_check_numberì— null ì „ë‹¬
- **ìˆ˜ì •**: DB ì»¬ëŸ¼ NOT NULL ì œê±° ë˜ëŠ” ë¹ˆ ë¬¸ìì—´ ê¸°ë³¸ê°’

### 3-2. ë°œì†¡ê²°ê³¼ íƒ€ì„ìŠ¤íƒ¬í”„ íŒŒì‹± ì—ëŸ¬
- **íŒŒì¼**: results.ts:121, 212
- **ì—ëŸ¬**: `invalid input syntax for type timestamp: "2026-02-20 00:00:00 00:00:00"`
- **ì›ì¸**: íƒ€ì„ì¡´ `+00:00`ì´ `00:00:00`ìœ¼ë¡œ ë“¤ì–´ê° (+ ê¸°í˜¸ ëˆ„ë½)
- **ìˆ˜ì •**: ë‚ ì§œ íŒŒë¼ë¯¸í„° ìƒì„± ë¡œì§ì—ì„œ íƒ€ì„ì¡´ í¬ë§· ìˆ˜ì •

### 3-3. SMS ìƒì„¸ì¡°íšŒ MySQL ì—ëŸ¬
- **íŒŒì¼**: admin.ts:1081
- **ì—ëŸ¬**: `Incorrect arguments to mysqld_stmt_execute` (LIMIT ? OFFSET ?)
- **ì›ì¸**: MySQL prepared statementì— LIMIT/OFFSETì´ ë¬¸ìì—´ë¡œ ì „ë‹¬ë¨
- **ìˆ˜ì •**: `Number(limit)`, `Number(offset)` ìºìŠ¤íŒ…

---

## 4. ìˆ˜ì • ëŒ€ìƒ íŒŒì¼ ëª©ë¡

| íŒŒì¼ | ìˆ˜ì • ë‚´ìš© |
|------|---------|
| **packages/backend/src/routes/upload.ts** | allData ì œê±°, BATCH_SIZE 500, ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬, Redis ì§„í–‰ë¥  ê°•í™”, ON CONFLICT ë³€ê²½ |
| **packages/backend/src/routes/sync.ts** | ON CONFLICT ë³€ê²½ (company_id+store_code+phone) |
| **packages/backend/src/routes/campaigns.ts** | íƒ€ê²Ÿ ì¶”ì¶œ store_code ê³ ë ¤, ìˆ˜ì‹ ê±°ë¶€ user_id ê¸°ì¤€ ì²´í¬ |
| **packages/backend/src/routes/customers.ts** | ì¤‘ë³µ ì²´í¬ ë¡œì§ ë³€ê²½, ì¡°íšŒ ì‹œ store_code ê³ ë ¤ |
| **packages/backend/src/routes/unsubscribes.ts** | company_id â†’ user_id ê¸°ì¤€ ì „í™˜ |
| **packages/backend/src/routes/spam-filter.ts** | spam_check_number NOT NULL ì—ëŸ¬ ìˆ˜ì • |
| **packages/backend/src/routes/results.ts** | íƒ€ì„ìŠ¤íƒ¬í”„ í¬ë§· ì—ëŸ¬ ìˆ˜ì • |
| **packages/backend/src/routes/admin.ts** | MySQL LIMIT/OFFSET Number ìºìŠ¤íŒ… |
| **packages/frontend/src/components/??** | ì—…ë¡œë“œ í”„ë¡œê·¸ë ˆìŠ¤ë°” ëª¨ë‹¬, allData ì˜ì¡´ ì œê±° |
| **DB (PostgreSQL)** | customers UNIQUE ì¸ë±ìŠ¤ ë³€ê²½, unsubscribes/opt_outs user_id ì¶”ê°€ |

---

## 5. ì‘ì—… ìˆœì„œ

### Phase 1: DB ë³€ê²½ (ë¨¼ì €)
1. ì„œë²„ DB ë°±ì—… (pg_dump)
2. customers UNIQUE ì¸ë±ìŠ¤ êµì²´ DDL
3. unsubscribes / opt_outsì— user_id ì»¬ëŸ¼ ì¶”ê°€ DDL
4. spam_filter_tests spam_check_number NOT NULL ì œê±°

### Phase 2: ë°±ì—”ë“œ ìˆ˜ì •
1. upload.ts ì „ì²´ ë¦¬íŒ©í† ë§ (ì•ˆì •í™” + ON CONFLICT)
2. sync.ts ON CONFLICT ë³€ê²½
3. campaigns.ts ìˆ˜ì‹ ê±°ë¶€ user_id ì²´í¬ + store_code íƒ€ê²Ÿ
4. customers.ts ì¡°íšŒ ë¡œì§
5. unsubscribes.ts user_id ê¸°ì¤€ ì „í™˜
6. 080 ì½œë°± broadcast ë¡œì§
7. spam-filter.ts, results.ts, admin.ts ì—ëŸ¬ ìˆ˜ì •

### Phase 3: í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì •
1. ì—…ë¡œë“œ ì»´í¬ë„ŒíŠ¸ â€” allData ì˜ì¡´ ì œê±° + í”„ë¡œê·¸ë ˆìŠ¤ë°” ëª¨ë‹¬
2. ìˆ˜ì‹ ê±°ë¶€ ê´€ë¦¬ UI â€” user_id ê¸°ì¤€

### Phase 4: ë°°í¬
1. git push
2. ì„œë²„ git pull
3. í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
4. pm2 restart
5. ë™ì‘ í™•ì¸

---

## 6. ì‘ì—… ì‹œ í•„ìš”í•œ íŒŒì¼

ë‹¤ìŒ ì±„íŒ…ì—ì„œ ì•„ë˜ íŒŒì¼ë“¤ì„ ì œê³µí•´ì•¼ ìˆ˜ì • ê°€ëŠ¥:

### í•„ìˆ˜ (ë°˜ë“œì‹œ ì œê³µ)
- [x] upload.ts (ì´ë¯¸ ì œê³µë¨)
- [ ] í”„ë¡ íŠ¸ ì—…ë¡œë“œ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ (íŒŒì¼ëª… í™•ì¸ í•„ìš”)
- [ ] campaigns.ts (ìˆ˜ì‹ ê±°ë¶€ ì²´í¬ ë¡œì§ í™•ì¸)
- [ ] unsubscribes.ts (í˜„ì¬ êµ¬ì¡° í™•ì¸)

### ì—ëŸ¬ ìˆ˜ì •ìš©
- [ ] spam-filter.ts (spam_check_number ë¶€ë¶„)
- [ ] results.ts (íƒ€ì„ìŠ¤íƒ¬í”„ íŒŒì‹± ë¶€ë¶„)
- [ ] admin.ts (1081ì¤„ ê·¼ì²˜ MySQL ì¿¼ë¦¬)

### í•„ìš” ì‹œ
- [ ] sync.ts (ON CONFLICT ë¶€ë¶„)
- [ ] customers.ts (ì¤‘ë³µ ì²´í¬ ë¶€ë¶„)

---

## 7. í•µì‹¬ ì›ì¹™ (ì¬í™•ì¸)

- **ë°ì´í„°ì†ì‹¤=ë§¤ì¶œì†ì‹¤**: DB ë³€ê²½ ì „ ë°˜ë“œì‹œ pg_dump ë°±ì—…
- **ì²˜ìŒë¶€í„° ì œëŒ€ë¡œ**: í”„ë¡œê·¸ë ˆìŠ¤ë°” ëª¨ë‹¬ ì˜ˆìœ ë²„ì „ìœ¼ë¡œ (animate-in, fade-in, ì•„ì´ì½˜)
- **ë°°í¬ ì „ íƒ€ì… ì²´í¬ í•„ìˆ˜**: tsc ë¹Œë“œ ì—ëŸ¬ ì—†ì´ ì»´íŒŒì¼ í™•ì¸ (2026-02-19 ì¥ì•  êµí›ˆ)
- **ì½”ë“œ ìˆ˜ì • í˜•ì‹**: "ê¸°ì¡´ì½”ë“œ â†’ ìƒˆì½”ë“œ" í˜•ì‹, íŒŒì¼ ë‚´ í˜•íƒœ ê·¸ëŒ€ë¡œ ë³µì‚¬, ì»¤ì„œì—ì„œ ê²€ìƒ‰ ê°€ëŠ¥í•˜ê²Œ
- **í™•ì¸ í›„ ì½”ë“œ ì‘ì„±**: ë°©í–¥ ì„¤ëª… â†’ Haroldë‹˜ ë™ì˜ â†’ ì½”ë“œ ì‘ì„±
